<html>
  <head>
    <% include ../partials/head.ejs %>
  </head>
  <body>
    <% include ../partials/nav.ejs %>
    <div class="container member">
      <ul class="nav nav-pills nav-fill" id="tabdiv" role="tablist">
        <li class="nav-item">
          <a
            class="nav-link active"
            id="user-tab"
            data-toggle="tab"
            href="#user"
            role="tab"
            aria-controls="user"
            aria-selected="true"
            >Users</a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            id="rooms-tab"
            data-toggle="tab"
            href="#rooms"
            role="tab"
            aria-controls="rooms"
            aria-selected="false"
            >Rooms</a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            id="reservations-tab"
            data-toggle="tab"
            href="#reservations"
            role="tab"
            aria-controls="reservations"
            aria-selected="false"
            >Reservations</a
          >
        </li>
      </ul>
    </div>
    <div class="tab-content" id="content">
      <div class="tab-pane fade show active" id="user" role="tabpanel" aria-labelledby="user-tab">
        <div class="container">
          <table class="table table-striped table-light">
            <thead>
              <tr>
                <th>User ID</th>
                <th>Email</th>
                <th>Rooms</th>
                <th>Reservations</th>
                <th>Revenue</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <%users.forEach(user => {%>
              <tr>
                <td scope="row"><%=user.id%></td>
                <td><%=user.email%></td>
                <td><%=user.rooms%></td>
                <td><%=user.reservations%></td>
                <td><%=user.revenue%></td>
                <td>
                  <button data-id="<%=user.id%>" type="button" class="btn btn-outline-danger delete delete-user">
                    <i class="fas fa-trash"></i>
                    Delete
                  </button>
                </td>
              </tr>
              <%})%>
            </tbody>
          </table>
        </div>
      </div>
      <div class="tab-pane fade" id="rooms" role="tabpanel" aria-labelledby="rooms-tab">
        <div class="container">
          <!-- <p class="lead"><%=JSON.stringify(rooms)%></p> -->
          <table class="table table-striped table-light">
            <thead>
              <tr>
                <th>Room ID</th>
                <th>Name</th>
                <th>Type</th>
                <th>Owner</th>
                <th>Reservations</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <%rooms.forEach(room => {%>
              <tr>
                <td scope="row"><%=room.id%></td>
                <td><%=room.name%></td>
                <td><%=room.type%></td>
                <td><%=room.owner%></td>
                <td><%=room.reservations%></td>
                <td>
                  <button data-id="<%=room.id%>" type="button" class="btn btn-outline-danger delete delete-room">
                    <i class="fas fa-trash"></i>
                    Delete
                  </button>
                </td>
              </tr>
              <%})%>
            </tbody>
          </table>
        </div>
      </div>
      <div class="tab-pane fade" id="reservations" role="tabpanel" aria-labelledby="reservations-tab">
        <div class="container">
          <!-- <p class="lead"><%=JSON.stringify(reservations, null, 2)%></p> -->
          <table class="table table-striped table-light">
            <thead>
              <tr>
                <th>Reservation ID</th>
                <th>Room</th>
                <th>Start Date</th>
                <th>Start Time</th>
                <th>Duration</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <%reservations.forEach(reservation => {%>
              <tr>
                <td scope="row"><%=reservation.id%></td>
                <td><%=reservation.roomName%></td>
                <td><%=reservation.start_date%></td>
                <td><%=reservation.start_time%></td>
                <td><%=reservation.duration%></td>
                <td>
                  <button
                    data-id="<%=reservation.id%>"
                    type="button"
                    class="btn btn-outline-danger delete delete-reservation"
                  >
                    <i class="fas fa-trash"></i>
                    Delete
                  </button>
                </td>
              </tr>
              <%})%>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <% include ../partials/footer.ejs %>
  </body>
</html>
